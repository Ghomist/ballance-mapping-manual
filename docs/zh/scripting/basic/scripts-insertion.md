# 脚本插入原理

如果直接在自制地图中编写脚本，游戏是不会执行的，因为脚本默认都是不激活的状态，并且游戏内也不会主动激活地图中的脚本。因此我们需要使用特殊的方式，将 **我们编写的自定义脚本** 插入至 **游戏会激活的脚本** 中。

## 机关替换原理

Ballance 地图存在 [机关替换机制](../../mapping/basic/module#机关替换)，由于机关上一般带有脚本，游戏在完成地图中机关的替换后，会激活机关上面的脚本，而我们使用重名的物体和脚本，则能让游戏误以为替换成功，从而激活我们自定义的脚本。

任何机关都可以实现脚本插入，而实际应用上我们更多选用的是 **出生点盘点火**。原因如下：

- 每一个 Ballance 关卡一定会 **有且仅有** 一个出生点盘点火
- 其脚本较为简单，需要导入的脚本较少

## 使用模板插入

根据原理，我们可以将游戏文件夹内的出生点盘点火导入到我们的地图中，但每次都需要重新整理脚本，因此我们制作了脚本插入模板，每次使用只需要合并到地图中即可。

你也可以直接在模板上编写脚本，这样每次导出地图到 nmo 后，只需要在 Virtools 中将脚本重新导入合并即可，这在需要频繁修改地图模型，同时需要带脚本测试时非常有用。

模板的下载与使用详见 [快速开始](quick-start)。
